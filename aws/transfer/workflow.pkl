/// AWS::Transfer::Workflow
///
/// Generated by rain build --pkl-class AWS::Transfer::Workflow
module aws.transfer.workflow

import "../../cloudformation.pkl"

/// Specifies the details for an EFS file.
open class WorkflowEfsInputFileLocation {
    FileSystemId: (String(matches(Regex(#"^(arn:aws[-a-z]*:elasticfilesystem:[0-9a-z-:]+:(access-point/fsap|file-system/fs)-[0-9a-f]{8,40}|fs(ap)?-[0-9a-f]{8,40})$"#)))|Mapping)?
    Path: (String(matches(Regex(#"^[^\x00]+$"#)))|Mapping)?
}

/// Specifies the location for the file being decrypted. Only applicable for the Decrypt type of workflow steps.
open class WorkflowInputFileLocation {
    EfsFileLocation: (WorkflowEfsInputFileLocation)?
    S3FileLocation: (WorkflowS3InputFileLocation)?
}

/// Specifies the location for the file being copied. Only applicable for the Copy type of workflow steps.
open class WorkflowS3FileLocation {
    S3FileLocation: (WorkflowS3InputFileLocation)?
}

/// Specifies the details for a S3 file.
open class WorkflowS3InputFileLocation {
    Bucket: (String(matches(Regex(#"^[a-z0-9][\.\-a-z0-9]{1,61}[a-z0-9]$"#)))|Mapping)?
    Key: (String(matches(Regex(#".*"#)))|Mapping)?
}

/// Specifies the key-value pair that are assigned to a file during the execution of a Tagging step.
open class WorkflowS3Tag {
    Key: String|Mapping
    Value: String|Mapping
}

/// Creates a key-value pair for a specific resource.
open class WorkflowTag {
    Key: String|Mapping
    Value: String|Mapping
}

typealias WorkflowStepType = "COPY"|"CUSTOM"|"DECRYPT"|"DELETE"|"TAG"

/// The basic building block of a workflow.
open class WorkflowWorkflowStep {
    CopyStepDetails: (Dynamic)?
    CustomStepDetails: (Dynamic)?
    DecryptStepDetails: (Dynamic)?
    DeleteStepDetails: (Dynamic)?
    TagStepDetails: (Dynamic)?
    Type: (WorkflowStepType|Mapping)?
}

/// Resource Type definition for AWS::Transfer::Workflow
open class Workflow extends cloudformation.Resource {

    Type = "AWS::Transfer::Workflow"


    /// A textual description for the workflow.
    hidden Description: (String(matches(Regex(#"^[\w\- ]*$"#)))|Mapping)?

    /// Specifies the steps (actions) to take if any errors are encountered during execution of the workflow.
    hidden OnExceptionSteps: (Listing<WorkflowWorkflowStep>)?

    /// Specifies the details for the steps that are in the specified workflow.
    hidden Steps: Listing<WorkflowWorkflowStep>

    /// Key-value pairs that can be used to group and search for workflows. Tags are metadata attached to workflows for any purpose.
    hidden Tags: (Listing<WorkflowTag>)?

    Properties {
        ["Description"] = if (Description == null) null else Description
        ["OnExceptionSteps"] = if (OnExceptionSteps == null) null else OnExceptionSteps
        ["Steps"] = if (Steps == null) null else Steps
        ["Tags"] = if (Tags == null) null else Tags
    }

}
