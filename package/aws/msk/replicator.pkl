/// AWS::MSK::Replicator
///
/// Generated by rain build --pkl-class AWS::MSK::Replicator
module aws.msk.replicator

import "../../cloudformation.pkl"

/// Details of an Amazon MSK cluster.
open class ReplicatorAmazonMskCluster {
    MskClusterArn: String(matches(Regex(#"arn:(aws|aws-us-gov|aws-cn):kafka:.*"#)))|Mapping
}

/// Configuration relating to consumer group replication.
open class ReplicatorConsumerGroupReplication {
    ConsumerGroupsToExclude: (Listing<String|Mapping>)?
    ConsumerGroupsToReplicate: Listing<String|Mapping>
    DetectAndCopyNewConsumerGroups: (Boolean|Mapping)?
    SynchroniseConsumerGroupOffsets: (Boolean|Mapping)?
}

/// Details of a Kafka cluster for replication.
open class ReplicatorKafkaCluster {
    AmazonMskCluster: ReplicatorAmazonMskCluster
    VpcConfig: ReplicatorKafkaClusterClientVpcConfig
}

/// Details of an Amazon VPC which has network connectivity to the Kafka cluster.
open class ReplicatorKafkaClusterClientVpcConfig {
    SecurityGroupIds: (Listing<String|Mapping>)?
    SubnetIds: Listing<String|Mapping>
}

typealias ReplicationInfoTargetCompressionType = "NONE"|"GZIP"|"SNAPPY"|"LZ4"|"ZSTD"

/// Specifies configuration for replication between a source and target Kafka cluster.
open class ReplicatorReplicationInfo {
    ConsumerGroupReplication: ReplicatorConsumerGroupReplication
    SourceKafkaClusterArn: String(matches(Regex(#"arn:(aws|aws-us-gov|aws-cn):kafka:.*"#)))|Mapping
    TargetCompressionType: ReplicationInfoTargetCompressionType|Mapping
    TargetKafkaClusterArn: String(matches(Regex(#"arn:(aws|aws-us-gov|aws-cn):kafka:.*"#)))|Mapping
    TopicReplication: ReplicatorTopicReplication
}

/// Configuration for specifying the position in the topics to start replicating from.
open class ReplicatorReplicationStartingPosition {
    Type: (ReplicatorReplicationStartingPositionType)?
}

typealias ReplicatorReplicationStartingPositionType = String|Mapping


/// Configuration for specifying replicated topic names should be the same as their corresponding upstream topics or prefixed with source cluster alias.
open class ReplicatorReplicationTopicNameConfiguration {
    Type: (ReplicatorReplicationTopicNameConfigurationType)?
}

typealias ReplicatorReplicationTopicNameConfigurationType = String|Mapping


/// 
open class ReplicatorTag {
    Key: String|Mapping
    Value: String|Mapping
}

/// 
open class ReplicatorTopicReplication {
    CopyAccessControlListsForTopics: (Boolean|Mapping)?
    CopyTopicConfigurations: (Boolean|Mapping)?
    DetectAndCopyNewTopics: (Boolean|Mapping)?
    StartingPosition: (ReplicatorReplicationStartingPosition)?
    TopicNameConfiguration: (ReplicatorReplicationTopicNameConfiguration)?
    TopicsToExclude: (Listing<String|Mapping>)?
    TopicsToReplicate: Listing<String|Mapping>
}

/// Resource Type definition for AWS::MSK::Replicator
open class Replicator extends cloudformation.Resource {

    Type = "AWS::MSK::Replicator"


    /// The current version of the MSK replicator.
    hidden CurrentVersion: (String|Mapping)?

    /// A summary description of the replicator.
    hidden Description: (String|Mapping)?

    /// Specifies a list of Kafka clusters which are targets of the replicator.
    hidden KafkaClusters: Listing<ReplicatorKafkaCluster>

    /// A list of replication configurations, where each configuration targets a given source cluster to target cluster replication flow.
    hidden ReplicationInfoList: Listing<ReplicatorReplicationInfo>

    /// The name of the replicator.
    hidden ReplicatorName: String(matches(Regex(#"^[0-9A-Za-z][0-9A-Za-z-]{0,}$"#)))|Mapping

    /// The Amazon Resource Name (ARN) of the IAM role used by the replicator to access external resources.
    hidden ServiceExecutionRoleArn: String(matches(Regex(#"arn:(aws|aws-us-gov|aws-cn):iam:.*"#)))|Mapping

    /// A collection of tags associated with a resource
    hidden Tags: (Listing<ReplicatorTag>)?

    Properties {
        ["CurrentVersion"] = if (CurrentVersion == null) null else CurrentVersion
        ["Description"] = if (Description == null) null else Description
        ["KafkaClusters"] = if (KafkaClusters == null) null else KafkaClusters
        ["ReplicationInfoList"] = if (ReplicationInfoList == null) null else ReplicationInfoList
        ["ReplicatorName"] = if (ReplicatorName == null) null else ReplicatorName
        ["ServiceExecutionRoleArn"] = if (ServiceExecutionRoleArn == null) null else ServiceExecutionRoleArn
        ["Tags"] = if (Tags == null) null else Tags
    }

}
