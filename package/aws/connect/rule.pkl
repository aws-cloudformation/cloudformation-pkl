/// AWS::Connect::Rule
///
/// Generated by rain build --pkl-class AWS::Connect::Rule
module aws.connect.rule

import "../../cloudformation.pkl"

/// A list of actions to be run when the rule is triggered.
open class RuleActions {
    AssignContactCategoryActions: (RuleAssignContactCategoryActions)?
    CreateCaseActions: (RuleCreateCaseActions)?
    EndAssociatedTasksActions: (RuleEndAssociatedTasksActions)?
    EventBridgeActions: (RuleEventBridgeActions)?
    SendNotificationActions: (RuleSendNotificationActions)?
    SubmitAutoEvaluationActions: (RuleSubmitAutoEvaluationActions)?
    TaskActions: (RuleTaskActions)?
    UpdateCaseActions: (RuleUpdateCaseActions)?
}

typealias RuleAssignContactCategoryAction = Dynamic


typealias RuleAssignContactCategoryActions = Listing<(RuleAssignContactCategoryAction)?>


/// 
open class RuleCreateCaseAction {
    Fields: RuleFields
    TemplateId: String|Mapping
}

typealias RuleCreateCaseActions = Listing<(RuleCreateCaseAction)?>


typealias RuleEndAssociatedTasksAction = Dynamic


typealias RuleEndAssociatedTasksActions = Listing<(RuleEndAssociatedTasksAction)?>


/// The EV action definition.
open class RuleEventBridgeAction {
    Name: String(matches(Regex(#"^[a-zA-Z0-9._-]{1,100}$"#)))|Mapping
}

typealias RuleEventBridgeActions = Listing<(RuleEventBridgeAction)?>


/// 
open class RuleField {
    Id: String|Mapping
    Value: RuleFieldValue
}

/// Object for case field values.
open class RuleFieldValue {
    BooleanValue: (Boolean|Mapping)?
    DoubleValue: (Number|Mapping)?
    EmptyValue: (Dynamic)?
    StringValue: (String|Mapping)?
}

typealias RuleFields = Listing<(RuleField)?>


typealias RuleNotificationRecipientTypeUserTags = Mapping<String, Any>

/// The type of notification recipient.
open class RuleNotificationRecipientType {
    UserArns: (Listing<RuleUserArn>)?
    UserTags: (RuleNotificationRecipientTypeUserTags)?
}

typealias ReferenceType = "URL"|"ATTACHMENT"|"NUMBER"|"STRING"|"DATE"|"EMAIL"

/// Information about the reference when the ``referenceType`` is ``URL``. Otherwise, null. (Supports variable injection in the ``Value`` field.)
open class RuleReference {
    Type: ReferenceType|Mapping
    Value: String(matches(Regex(#"^(/|https:)"#)))|Mapping
}

typealias RuleTriggerEventSourceEventSourceName = "OnContactEvaluationSubmit"|"OnPostCallAnalysisAvailable"|"OnRealTimeCallAnalysisAvailable"|"OnRealTimeChatAnalysisAvailable"|"OnPostChatAnalysisAvailable"|"OnZendeskTicketCreate"|"OnZendeskTicketStatusUpdate"|"OnSalesforceCaseCreate"|"OnMetricDataUpdate"|"OnCaseCreate"|"OnCaseUpdate"

/// The name of the event source.
open class RuleRuleTriggerEventSource {
    EventSourceName: RuleTriggerEventSourceEventSourceName|Mapping
    IntegrationAssociationArn: (String(matches(Regex(#"^$|arn:aws[-a-z0-9]*:connect:[-a-z0-9]*:[0-9]{12}:instance/[-a-zA-Z0-9]*/integration-association/[-a-zA-Z0-9]*$"#)))|Mapping)?
}

typealias SendNotificationActionContentType = "PLAIN_TEXT"

typealias SendNotificationActionDeliveryMethod = "EMAIL"

/// Information about the send notification action.
open class RuleSendNotificationAction {
    Content: String|Mapping
    ContentType: SendNotificationActionContentType|Mapping
    DeliveryMethod: SendNotificationActionDeliveryMethod|Mapping
    Recipient: RuleNotificationRecipientType
    Subject: (String|Mapping)?
}

typealias RuleSendNotificationActions = Listing<(RuleSendNotificationAction)?>


/// 
open class RuleSubmitAutoEvaluationAction {
    EvaluationFormArn: String(matches(Regex(#"^$|arn:aws[-a-z0-9]*:connect:[-a-z0-9]*:[0-9]{12}:instance/[-a-zA-Z0-9]*/evaluation-form/[-a-zA-Z0-9]*$"#)))|Mapping
}

typealias RuleSubmitAutoEvaluationActions = Listing<(RuleSubmitAutoEvaluationAction)?>


/// A key-value pair to associate with a resource.
open class RuleTag {
    Key: String(matches(Regex(#"^(?!aws:)[a-zA-Z+-=._:/]+$"#)))|Mapping
    Value: String|Mapping
}

typealias RuleTaskActionReferences = Mapping<String, Any>

/// Information about the task action. This field is required if ``TriggerEventSource`` is one of the following values: ``OnZendeskTicketCreate`` | ``OnZendeskTicketStatusUpdate`` | ``OnSalesforceCaseCreate``
open class RuleTaskAction {
    ContactFlowArn: String(matches(Regex(#"^$|arn:aws[-a-z0-9]*:connect:[-a-z0-9]*:[0-9]{12}:instance/[-a-zA-Z0-9]*/contact-flow/[-a-zA-Z0-9]*$"#)))|Mapping
    Description: (String|Mapping)?
    Name: String|Mapping
    References: (RuleTaskActionReferences)?
}

typealias RuleTaskActions = Listing<(RuleTaskAction)?>


/// 
open class RuleUpdateCaseAction {
    Fields: RuleFields
}

typealias RuleUpdateCaseActions = Listing<(RuleUpdateCaseAction)?>


typealias RuleUserArn = String|Mapping


/// Creates a rule for the specified CON instance.
open class Rule extends cloudformation.Resource {

    Type = "AWS::Connect::Rule"


    /// A list of actions to be run when the rule is triggered.
    hidden Actions: RuleActions

    /// The conditions of the rule.
    hidden Function: String|Mapping

    /// The Amazon Resource Name (ARN) of the instance.
    hidden InstanceArn: String(matches(Regex(#"^arn:aws[-a-z0-9]*:connect:[-a-z0-9]*:[0-9]{12}:instance/[-a-zA-Z0-9]*$"#)))|Mapping

    /// The name of the rule.
    hidden Name: String(matches(Regex(#"^[a-zA-Z0-9._-]{1,200}$"#)))|Mapping

    /// The publish status of the rule.
    ///
    ///   *Allowed values*: ``DRAFT`` | ``PUBLISHED``
    hidden PublishStatus: RulePublishStatus|Mapping

    /// The tags used to organize, track, or control access for this resource. For example, { "tags": {"key1":"value1", "key2":"value2"} }.
    hidden Tags: (Listing<RuleTag>)?

    /// The event source to trigger the rule.
    hidden TriggerEventSource: RuleRuleTriggerEventSource

    Properties {
        ["Actions"] = if (Actions == null) null else Actions
        ["Function"] = if (Function == null) null else Function
        ["InstanceArn"] = if (InstanceArn == null) null else InstanceArn
        ["Name"] = if (Name == null) null else Name
        ["PublishStatus"] = if (PublishStatus == null) null else PublishStatus
        ["Tags"] = if (Tags == null) null else Tags
        ["TriggerEventSource"] = if (TriggerEventSource == null) null else TriggerEventSource
    }

}


typealias RulePublishStatus = "DRAFT"|"PUBLISHED"
